
{% extends "binnetapp/base.html" %}

{% block hauptinhalt %}
<div class="index-div">
    <h1>Index</h1>

    <hr>

    <div class="form-div">

        <p class="form-description">
            Hier können Sie die Daten für die Mülleimer eintragen.
        </p>
        <form action="" method="POST">
            {% csrf_token %}
            {{ form }}
            <input type="submit" name="Submit">
        </form>
    </div>

    <hr>

    <div id = "map" style = "width: 900px; height: 580px"></div>
</div>

<!-- Data of garbage bins -->
{{data|json_script:"bin-data"}}

<!-- Javascript for Leaflet -->
<script>
    // Creating map options
    var mapOptions = {
        center: [48.060863614253165, 11.670241807559309], // Set center of Map to "Wolf-Ferrari-Haus"
        zoom: 14,
        minZoom: 14,
    }

    // Creating a map object
    var map = new L.map('map', mapOptions);

    // Creating a Layer object
    var layer = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
    
    // Adding layer to the map
    map.addLayer(layer);

    // Add markers to the map
    const data = JSON.parse(document.getElementById('bin-data').textContent);
    
    for (var i = 0; i < data.length; i++){
        id = data[i][0];
        lat = data[i][1];
        lon = data[i][2];
        L.marker([lat, lon]).addTo(map);
    }

    // Test purposes: Marker for "Wolf-Ferrari-Haus"
    //L.marker([48.060863614253165, 11.670241807559309]).addTo(map);
</script>




{% endblock %}